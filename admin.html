<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ğŸ‘‘ Admin Ngá»c Becon</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{--pink:#ff5fa8}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{
margin:0;background:radial-gradient(circle,#4a005f,#120015);
color:#fff
}
.hidden{display:none}

/* LOGIN */
.login{
max-width:380px;margin:120px auto;
background:#1a001f;padding:30px;
border-radius:26px;text-align:center;
animation:fade .6s
}
.login h2{color:#ff9ad5}
.login input{
width:100%;padding:14px;margin-top:14px;
border-radius:14px;border:none
}
.login button{
width:100%;padding:14px;margin-top:18px;
border:none;border-radius:999px;
background:linear-gradient(90deg,#ff5fa8,#ff9ad5);
color:#fff;font-weight:800
}

/* HEADER */
header{
position:sticky;top:0;z-index:10;
background:linear-gradient(90deg,#ff5fa8,#ff9ad5);
padding:16px;font-weight:900;
display:flex;justify-content:space-between
}

/* LAYOUT */
.main{display:flex;height:calc(100vh - 64px)}
.sidebar{
width:260px;background:#1a001f;padding:16px
}
.sidebar button{
width:100%;padding:12px;margin-bottom:10px;
border:none;border-radius:14px;
background:#ff5fa8;color:#fff;font-weight:700
}
.content{flex:1;padding:20px;overflow:auto}

/* CARD */
.card{
background:#1a001f;padding:20px;
border-radius:24px;margin-bottom:20px;
animation:fade .4s
}

/* TABLE */
table{width:100%;border-collapse:collapse}
th,td{padding:10px;border-bottom:1px solid #333;text-align:center}
th{color:#ff9ad5}

/* CHAT */
.chat-wrap{
position:fixed;right:20px;bottom:20px;
width:360px;height:520px;
background:#120015;border-radius:24px;
display:flex;flex-direction:column;
box-shadow:0 0 40px #ff5fa855
}
.chat-header{
background:linear-gradient(90deg,#ff5fa8,#ff9ad5);
padding:14px;border-radius:24px 24px 0 0;
font-weight:900
}
.chat-users{
display:flex;overflow:auto;padding:8px;gap:6px
}
.chat-users button{
padding:8px 14px;border:none;border-radius:999px;
background:#2a002f;color:#fff;white-space:nowrap
}
.chat-users .active{background:#ff5fa8}
.chat-body{flex:1;overflow:auto;padding:12px}
.msg{margin-bottom:8px}
.admin{text-align:right}
.bubble{
display:inline-block;padding:10px 14px;
border-radius:18px;max-width:75%
}
.admin .bubble{background:#ff5fa8}
.user .bubble{background:#333}
.chat-input{
display:flex;gap:6px;padding:10px
}
.chat-input input{
flex:1;padding:12px;border-radius:999px;border:none
}
.chat-input button{
width:40px;height:40px;
border:none;border-radius:50%;
background:#ff5fa8;color:#fff
}

@keyframes fade{
from{opacity:0;transform:translateY(20px)}
to{opacity:1}
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="login">
<h2>ğŸ‘‘ ADMIN NGá»ŒC BECON</h2>
<input id="l_user" placeholder="TÃ i khoáº£n">
<input id="l_pass" type="password" placeholder="Máº­t kháº©u">
<button onclick="login()">ÄÄƒng nháº­p</button>
</div>

<!-- PANEL -->
<div id="panel" class="hidden">
<header>
<span>ğŸ‘‘ ADMIN PANEL</span>
<span onclick="location.reload()" style="cursor:pointer">ğŸšª</span>
</header>

<div class="main">
<!-- SIDEBAR -->
<div class="sidebar">
<button onclick="show('users')">ğŸ‘¤ User</button>
<button onclick="show('topups')">ğŸ’³ Náº¡p tiá»n</button>
<button onclick="show('orders')">ğŸ”¥ ÄÆ¡n cÃ y</button>
</div>

<!-- CONTENT -->
<div class="content">

<div id="users" class="card hidden">
<h3>ğŸ‘¤ NgÆ°á»i dÃ¹ng</h3>
<table>
<thead><tr><th>User</th><th>Sá»‘ dÆ°</th></tr></thead>
<tbody id="uList"></tbody>
</table>
</div>

<div id="topups" class="card hidden">
<h3>ğŸ’³ Duyá»‡t náº¡p tiá»n</h3>
<table>
<thead><tr><th>MÃ£</th><th>User</th><th>Tiá»n</th><th>Tráº¡ng thÃ¡i</th><th>Xá»­ lÃ½</th></tr></thead>
<tbody id="tList"></tbody>
</table>
</div>

<div id="orders" class="card hidden">
<h3>ğŸ”¥ Duyá»‡t Ä‘Æ¡n cÃ y</h3>
<table>
<thead><tr><th>MÃ£</th><th>User</th><th>Tiá»n</th><th>Tráº¡ng thÃ¡i</th><th>Xá»­ lÃ½</th></tr></thead>
<tbody id="oList"></tbody>
</table>
</div>

</div>
</div>
</div>

<!-- CHAT ADMIN -->
<div id="chatBox" class="chat-wrap hidden">
<div class="chat-header">ğŸ’¬ Chat CSKH</div>
<div class="chat-users" id="chatUsers"></div>
<div class="chat-body" id="chatBody"></div>
<div class="chat-input">
<input id="chatMsg" placeholder="Nháº¯n tin...">
<input type="file" id="imgInput" hidden accept="image/*">
<button onclick="imgInput.click()">ğŸ–¼</button>
<button onclick="sendMsg()">â¤</button>
</div>
</div>

<script>
/* ADMIN LOGIN */
const ADMIN_USER="Ngocbecon"
const ADMIN_PASS="manhmanh"

/* DATABASE */
let DB=JSON.parse(localStorage.getItem("SHOP"))||{users:{},topups:[],orders:[]}
const save=()=>localStorage.setItem("SHOP",JSON.stringify(DB))

function login(){
if(l_user.value===ADMIN_USER && l_pass.value===ADMIN_PASS){
loginBox.classList.add("hidden")
panel.classList.remove("hidden")
chatBox.classList.remove("hidden")
loadAll()
}else alert("Sai tÃ i khoáº£n admin")
}

/* MENU */
function show(id){
["users","topups","orders"].forEach(x=>document.getElementById(x).classList.add("hidden"))
document.getElementById(id).classList.remove("hidden")
}

/* USERS */
function loadUsers(){
uList.innerHTML=""
Object.keys(DB.users).forEach(u=>{
uList.innerHTML+=`<tr><td>${u}</td><td>${DB.users[u].money}Ä‘</td></tr>`
})
}

/* TOPUPS */
function loadTopups(){
tList.innerHTML=""
DB.topups.forEach((x,i)=>{
tList.innerHTML+=`
<tr>
<td>${x.id}</td><td>${x.user}</td><td>${x.money}</td><td>${x.status}</td>
<td>
<button onclick="okTopup(${i})">âœ”</button>
<button onclick="noTopup(${i})">âœ–</button>
</td>
</tr>`
})
}
function okTopup(i){
let x=DB.topups[i]
if(x.status!=="Chá» duyá»‡t")return
DB.users[x.user].money+=x.money
x.status="ÄÃ£ duyá»‡t"
save();loadAll()
}
function noTopup(i){DB.topups[i].status="Há»§y";save();loadTopups()}

/* ORDERS */
function loadOrders(){
oList.innerHTML=""
DB.orders.forEach((x,i)=>{
oList.innerHTML+=`
<tr>
<td>${x.id}</td><td>${x.user}</td><td>${x.money}</td><td>${x.status}</td>
<td>
<button onclick="done(${i})">âœ”</button>
<button onclick="cancel(${i})">âœ–</button>
</td>
</tr>`
})
}
function done(i){DB.orders[i].status="HoÃ n thÃ nh";save();loadOrders()}
function cancel(i){
let x=DB.orders[i]
DB.users[x.user].money+=x.money
x.status="HoÃ n tiá»n"
save();loadAll()
}

/* CHAT */
let curUser=null
function loadChatUsers(){
chatUsers.innerHTML=""
Object.keys(DB.users).forEach(u=>{
chatUsers.innerHTML+=`<button onclick="openChat('${u}')">${u}</button>`
})
}
function openChat(u){
curUser=u
[...chatUsers.children].forEach(b=>b.classList.remove("active"))
event.target.classList.add("active")
loadChat()
}
function chatKey(){return "CHAT_"+curUser}
function loadChat(){
chatBody.innerHTML=""
let c=JSON.parse(localStorage.getItem(chatKey()))||[]
c.forEach(m=>{
let html=m.type==="img"
? `<img src="${m.data}" style="max-width:100%">`
: m.text
chatBody.innerHTML+=`<div class="msg ${m.from}"><div class="bubble">${html}</div></div>`
})
chatBody.scrollTop=9999
}
function sendMsg(){
if(!curUser||!chatMsg.value)return
let c=JSON.parse(localStorage.getItem(chatKey()))||[]
c.push({from:"admin",type:"text",text:chatMsg.value})
localStorage.setItem(chatKey(),JSON.stringify(c))
chatMsg.value=""
loadChat()
}
imgInput.onchange=()=>{
let r=new FileReader()
r.onload=()=>{
let c=JSON.parse(localStorage.getItem(chatKey()))||[]
c.push({from:"admin",type:"img",data:r.result})
localStorage.setItem(chatKey(),JSON.stringify(c))
loadChat()
}
r.readAsDataURL(imgInput.files[0])
}

/* LOAD */
function loadAll(){
loadUsers();loadTopups();loadOrders();loadChatUsers()
}
</script>

</body>
</html>
