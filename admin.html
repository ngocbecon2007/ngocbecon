<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Admin Panel â€¢ Ngá»c Becon</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
*{box-sizing:border-box;font-family:Arial}
body{margin:0;background:#eef1f6}

/* LOGIN */
#login{
height:100vh;
display:flex;
justify-content:center;
align-items:center
}
.login-box{
background:#fff;
padding:30px;
border-radius:14px;
width:320px;
box-shadow:0 10px 30px rgba(0,0,0,.15)
}
input{width:100%;padding:10px;margin:8px 0}

/* ADMIN */
header{
background:#222;
color:#fff;
padding:16px 30px;
display:flex;
justify-content:space-between;
align-items:center
}
header h2{margin:0}
header button{
background:#ff4f9a;
border:none;
color:#fff;
padding:8px 14px;
border-radius:6px
}

.container{
padding:25px;
max-width:1200px;
margin:auto
}

.box{
background:#fff;
border-radius:14px;
padding:20px;
margin-bottom:25px;
box-shadow:0 10px 25px rgba(0,0,0,.08)
}

h3{margin-top:0}

table{
width:100%;
border-collapse:collapse;
font-size:14px
}
th,td{
padding:10px;
border-bottom:1px solid #ddd
}
th{
background:#ff4f9a;
color:#fff
}

.btn{
background:#ff4f9a;
border:none;
color:#fff;
padding:6px 12px;
border-radius:6px;
cursor:pointer
}
.btn.gray{background:#666}
.stat{
font-size:22px;
color:#ff4f9a;
font-weight:bold
}
.hidden{display:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
<div class="login-box">
<h3>ğŸ” Admin Login</h3>
<input id="au" placeholder="Admin user">
<input id="ap" type="password" placeholder="Password">
<button class="btn" style="width:100%" onclick="login()">ÄÄƒng nháº­p</button>
</div>
</div>

<!-- ADMIN PANEL -->
<div id="panel" class="hidden">
<header>
<h2>ğŸ‘‘ ADMIN PANEL</h2>
<button onclick="logout()">ÄÄƒng xuáº¥t</button>
</header>

<div class="container">

<!-- STATS -->
<div class="box">
<h3>ğŸ“Š Thá»‘ng kÃª</h3>
<p>Doanh thu: <span class="stat" id="revenue">0Ä‘</span></p>
<p>Sá»‘ user: <b id="users">0</b></p>
<p>ÄÆ¡n cÃ y: <b id="orders">0</b></p>
</div>

<!-- Náº P -->
<div class="box">
<h3>ğŸ’° YÃªu cáº§u náº¡p tiá»n</h3>
<table>
<thead>
<tr>
<th>User</th>
<th>Sá»‘ tiá»n</th>
<th>HÃ nh Ä‘á»™ng</th>
</tr>
</thead>
<tbody id="naplist"></tbody>
</table>
</div>

<!-- ÄÆ N CÃ€Y -->
<div class="box">
<h3>ğŸ® ÄÆ¡n cÃ y thuÃª</h3>
<table>
<thead>
<tr>
<th>User</th>
<th>Game</th>
<th>GiÃ¡</th>
<th>Tráº¡ng thÃ¡i</th>
</tr>
</thead>
<tbody id="orderlist"></tbody>
</table>
</div>

</div>
</div>

<script>
const ADMIN_USER="ngocbecon";
const ADMIN_PASS="manhmanh";

/* LOGIN */
function login(){
if(au.value!==ADMIN_USER || ap.value!==ADMIN_PASS){
alert("âŒ Sai thÃ´ng tin admin"); return;
}
loginDiv.style.display="none";
panel.classList.remove("hidden");
loadAll();
}

function logout(){
location.reload();
}

/* LOAD DATA */
function loadAll(){
loadStats();
loadNap();
loadOrders();
}

function loadStats(){
let rev=0, ucount=0, ocount=0;
for(let k in localStorage){
if(k.startsWith("data_")){
ucount++;
let d=JSON.parse(localStorage.getItem(k));
d.history.forEach(o=>{
if(o.status==="HoÃ n thÃ nh") rev+=o.price;
ocount++;
});
}
}
revenue.innerText=rev.toLocaleString()+"Ä‘";
users.innerText=ucount;
orders.innerText=ocount;
}

/* Náº P */
function loadNap(){
let arr=JSON.parse(localStorage.getItem("nap_orders")||"[]");
naplist.innerHTML="";
arr.forEach((n,i)=>{
naplist.innerHTML+=`
<tr>
<td>${n.user}</td>
<td>${n.money.toLocaleString()}Ä‘</td>
<td>
<button class="btn" onclick="approve(${i})">Duyá»‡t</button>
</td>
</tr>`;
});
}

function approve(i){
let arr=JSON.parse(localStorage.getItem("nap_orders"));
let n=arr[i];
let d=JSON.parse(localStorage.getItem("data_"+n.user));
d.balance+=n.money;
localStorage.setItem("data_"+n.user,JSON.stringify(d));
arr.splice(i,1);
localStorage.setItem("nap_orders",JSON.stringify(arr));
alert("âœ… ÄÃ£ cá»™ng tiá»n cho "+n.user);
loadAll();
}

/* ÄÆ N */
function loadOrders(){
orderlist.innerHTML="";
for(let k in localStorage){
if(k.startsWith("data_")){
let u=k.replace("data_","");
let d=JSON.parse(localStorage.getItem(k));
d.history.forEach((o,idx)=>{
orderlist.innerHTML+=`
<tr>
<td>${u}</td>
<td>${o.game}</td>
<td>${o.price.toLocaleString()}Ä‘</td>
<td>
<select onchange="setStatus('${u}',${idx},this.value)">
<option ${o.status=="Äang xá»­ lÃ½"?"selected":""}>Äang xá»­ lÃ½</option>
<option ${o.status=="Äang cÃ y"?"selected":""}>Äang cÃ y</option>
<option ${o.status=="HoÃ n thÃ nh"?"selected":""}>HoÃ n thÃ nh</option>
<option ${o.status=="Há»§y"?"selected":""}>Há»§y</option>
</select>
</td>
</tr>`;
});
}
}
}

function setStatus(u,i,v){
let d=JSON.parse(localStorage.getItem("data_"+u));
d.history[i].status=v;
localStorage.setItem("data_"+u,JSON.stringify(d));
loadStats();
}
</script>

</body>
</html>
