<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Admin â€“ Ngá»c Becon</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
:root{--pink:#ff4fa3}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{margin:0;background:#0b0010;color:#fff}

.hidden{display:none}
button{cursor:pointer}

header{
background:linear-gradient(90deg,#ff4fa3,#ff77b7);
padding:14px;text-align:center;font-size:18px;font-weight:bold
}

.box{
max-width:1100px;margin:20px auto;padding:20px
}

.card{
background:#16001d;padding:16px;border-radius:16px;margin-bottom:16px
}

input,select{
width:100%;padding:10px;margin:6px 0;
border:none;border-radius:10px
}

button{
background:#ff4fa3;color:#fff;
border:none;padding:10px 14px;
border-radius:10px;margin-top:6px
}

table{
width:100%;border-collapse:collapse;margin-top:10px;font-size:14px
}
th,td{
border-bottom:1px solid #333;
padding:8px;text-align:left
}
th{color:#ff77b7}
</style>
</head>

<body>

<header>ğŸ” ADMIN NGá»ŒC BECON</header>

<!-- LOGIN -->
<div id="loginBox" class="box">
<div class="card">
<h3>ÄÄƒng nháº­p Admin</h3>
<input id="adminUser" placeholder="TÃ i khoáº£n">
<input id="adminPass" type="password" placeholder="Máº­t kháº©u">
<button onclick="loginAdmin()">ÄÄƒng nháº­p</button>
</div>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="box hidden">

<!-- USERS -->
<div class="card">
<h3>ğŸ‘¤ NgÆ°á»i dÃ¹ng</h3>
<table id="userTable"></table>
</div>

<!-- TOPUP -->
<div class="card">
<h3>ğŸ’³ Náº¡p tiá»n chá» duyá»‡t</h3>
<table id="topupTable"></table>
</div>

<!-- ORDERS -->
<div class="card">
<h3>ğŸ“¦ ÄÆ¡n cÃ y thuÃª</h3>
<table id="orderTable"></table>
</div>

</div>

<script>
const ADMIN_USER="Ngocbecon"
const ADMIN_PASS="manhmanh"

let DB=JSON.parse(localStorage.getItem("SHOP_DB"))||{
  users:{},orders:[],topups:[]
}

function save(){
  localStorage.setItem("SHOP_DB",JSON.stringify(DB))
}

/* LOGIN */
function loginAdmin(){
  if(adminUser.value!==ADMIN_USER||adminPass.value!==ADMIN_PASS)
    return alert("Sai tÃ i khoáº£n admin")
  loginBox.classList.add("hidden")
  adminPanel.classList.remove("hidden")
  renderAll()
}

/* RENDER */
function renderAll(){
  renderUsers()
  renderTopups()
  renderOrders()
}

/* USERS */
function renderUsers(){
  let html="<tr><th>User</th><th>Sá»‘ dÆ°</th><th>HÃ nh Ä‘á»™ng</th></tr>"
  for(let u in DB.users){
    html+=`
    <tr>
      <td>${u}</td>
      <td>${DB.users[u].money}Ä‘</td>
      <td>
        <button onclick="changeMoney('${u}',10000)">+10k</button>
        <button onclick="changeMoney('${u}',-10000)">-10k</button>
      </td>
    </tr>`
  }
  userTable.innerHTML=html
}

function changeMoney(u,amt){
  DB.users[u].money+=amt
  DB.users[u].notifications=DB.users[u].notifications||[]
  DB.users[u].notifications.push({
    text:(amt>0?"â•":"â–")+" "+Math.abs(amt)+"Ä‘",
    time:new Date().toLocaleString(),
    read:false
  })
  save();renderUsers()
}

/* TOPUP */
function renderTopups(){
  let html="<tr><th>User</th><th>Loáº¡i</th><th>Sá»‘ tiá»n</th><th>Chi tiáº¿t</th><th></th></tr>"
  DB.topups.filter(t=>t.status==="pending").forEach(t=>{
    html+=`
    <tr>
      <td>${t.user}</td>
      <td>${t.type}</td>
      <td>${t.amount}</td>
      <td>${t.detail}</td>
      <td>
        <button onclick="approveTopup(${t.id})">Duyá»‡t</button>
      </td>
    </tr>`
  })
  topupTable.innerHTML=html
}

function approveTopup(id){
  let t=DB.topups.find(x=>x.id===id)
  if(!t)return
  t.status="done"
  DB.users[t.user].money+=t.amount
  DB.users[t.user].notifications.push({
    text:"ğŸ’° Náº¡p thÃ nh cÃ´ng "+t.amount+"Ä‘",
    time:new Date().toLocaleString(),
    read:false
  })
  save();renderAll()
}

/* ORDERS */
function renderOrders(){
  let html="<tr><th>User</th><th>Game</th><th>GÃ³i</th><th>GiÃ¡</th><th></th></tr>"
  DB.orders.filter(o=>o.status==="pending").forEach(o=>{
    html+=`
    <tr>
      <td>${o.user}</td>
      <td>${o.game}</td>
      <td>${o.pack}</td>
      <td>${o.price}</td>
      <td>
        <button onclick="approveOrder(${o.id})">HoÃ n thÃ nh</button>
      </td>
    </tr>`
  })
  orderTable.innerHTML=html
}

function approveOrder(id){
  let o=DB.orders.find(x=>x.id===id)
  if(!o)return
  o.status="done"
  DB.users[o.user].notifications.push({
    text:"âœ… ÄÆ¡n "+o.game+" Ä‘Ã£ hoÃ n thÃ nh",
    time:new Date().toLocaleString(),
    read:false
  })
  save();renderOrders()
}
</script>

</body>
</html>
