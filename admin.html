<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ADMIN â€“ Ngá»c Becon Shop</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<style>
body{margin:0;font-family:Arial;background:#160018;color:#fff}
h2{margin-top:30px}
.card{background:#26002e;padding:15px;border-radius:12px;margin:15px}
button{padding:6px 12px;border:none;border-radius:6px;background:#ff4fa3;color:#fff;cursor:pointer}
table{width:100%;border-collapse:collapse}
td,th{border-bottom:1px solid #444;padding:6px;text-align:left}
</style>
</head>
<body>

<h1 style="padding:15px;background:#ff4fa3">ğŸ‘‘ ADMIN NGá»ŒC BECON</h1>

<div class="card">
<h2>ğŸ‘¤ NgÆ°á»i dÃ¹ng</h2>
<table id="userTable"></table>
</div>

<div class="card">
<h2>ğŸ’³ Duyá»‡t náº¡p</h2>
<table id="napTable"></table>
</div>

<div class="card">
<h2>ğŸ“¦ Duyá»‡t Ä‘Æ¡n</h2>
<table id="orderTable"></table>
</div>

<script>
const DB = JSON.parse(localStorage.shopDB||'{"users":{},"orders":[],"naps":[],"notifications":{}}')

function save(){localStorage.shopDB=JSON.stringify(DB)}

function notify(user,text){
DB.notifications[user]=DB.notifications[user]||[]
DB.notifications[user].unshift({
text,
time:new Date().toLocaleString(),
read:false
})
save()
}

function renderUsers(){
let h="<tr><th>User</th><th>Sá»‘ dÆ°</th></tr>"
Object.keys(DB.users).forEach(u=>{
h+=`<tr><td>${u}</td><td>${DB.users[u].money||0}Ä‘</td></tr>`
})
userTable.innerHTML=h
}

function renderNaps(){
let h="<tr><th>User</th><th>Loáº¡i</th><th>Tiá»n</th><th>ThÃ´ng tin</th><th></th></tr>"
DB.naps.forEach((n,i)=>{
if(n.done) return
h+=`
<tr>
<td>${n.user}</td>
<td>${n.type}</td>
<td>${n.amount}</td>
<td>${n.info||""}</td>
<td><button onclick="approveNap(${i})">Duyá»‡t</button></td>
</tr>`
})
napTable.innerHTML=h
}

function approveNap(i){
let n=DB.naps[i]
DB.users[n.user].money+=Number(n.amount)
n.done=true
notify(n.user,`ğŸ’° Náº¡p ${n.amount}Ä‘ Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t`)
save();render()
}

function renderOrders(){
let h="<tr><th>User</th><th>Game</th><th>GÃ³i</th><th>Tráº¡ng thÃ¡i</th><th></th></tr>"
DB.orders.forEach((o,i)=>{
h+=`
<tr>
<td>${o.user}</td>
<td>${o.game}</td>
<td>${o.pack}</td>
<td>${o.status||"Chá» duyá»‡t"}</td>
<td>${o.status!=="HoÃ n thÃ nh"?`<button onclick="doneOrder(${i})">HoÃ n thÃ nh</button>`:""}</td>
</tr>`
})
orderTable.innerHTML=h
}

function doneOrder(i){
let o=DB.orders[i]
o.status="HoÃ n thÃ nh"
notify(o.user,`ğŸ“¦ ÄÆ¡n ${o.game} â€“ ${o.pack} Ä‘Ã£ hoÃ n thÃ nh`)
save();render()
}

function render(){
renderUsers()
renderNaps()
renderOrders()
}
render()
</script>

</body>
</html>
